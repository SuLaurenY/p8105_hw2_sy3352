p8105_hw2_SY3352
================
Su Yan
2025-10-01

## Problem 1

``` r
pols_df = read_csv("data/pols-month.csv") |> 
  separate(mon, into = c("year","month","day"), sep = "-") |> 
  mutate(year = as.integer(year), month = as.integer(month)) |> 
  mutate(month = month.name[month]) |> 
  mutate(president = if_else(prez_gop == 1, "gop","dem")) |> 
  select(-prez_dem, -prez_gop,-day)
```

    ## Rows: 822 Columns: 9
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl  (8): prez_gop, gov_gop, sen_gop, rep_gop, prez_dem, gov_dem, sen_dem, r...
    ## date (1): mon
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
snp_df = read_csv("data/snp.csv") |> 
  mutate(date = mdy(date)) |> 
  mutate(year = year(date), month = month(date), day = day(date)) |> 
  mutate(year = as.integer(year), month = month.name[month]) |> 
  mutate(year = if_else(year > 2024, year - 100, year)) |> 
  select(-date, -day) |> 
  relocate(year, month) |> 
  arrange(year, match(month, month.name))
```

    ## Rows: 787 Columns: 2
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (1): date
    ## dbl (1): close
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
unemp_df = read_csv("data/unemployment.csv") |> 
  pivot_longer(cols = Jan:Dec,
               names_to = "month",
               values_to = "unemployment_rate") |> 
  mutate(month = recode(month,
                        Jan = "January", Feb = "February", Mar = "March",
                        Apr = "April", May = "May", Jun = "June",
                        Jul = "July", Aug = "August", Sep = "September",
                        Oct = "October", Nov = "November", Dec = "December")) |> 
  rename(year = Year) 
```

    ## Rows: 68 Columns: 13
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl (13): Year, Jan, Feb, Mar, Apr, May, Jun, Jul, Aug, Sep, Oct, Nov, Dec
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
merge_df = pols_df |> 
  left_join(snp_df, by = c("year","month")) |> 
  left_join(unemp_df, by = c("year","month"))
```

The `pols_df` data set contains data from 1947 to 2015 of number of
politicians(including the president) in each political party in the US
by month. The `snp_df` contains data of closing values of the S&P stock
index from 1950 to 2015 by month. The `unemp_df` data set contains data
of unemployment rate from 1948 to 2015 by month. The merged `merge_df`
data set has 822 rows and 11 columns of data, which covered 1947 to 2015
of political party, S&P index closing value and employment information.
Some of the key variables in **`merge_df`** are `year` `month`
`president` `closing` and `unemployment_rate`.

## Problem 2

``` r
mtw_df = read_excel("data/202509 Trash Wheel Collection Data.xlsx",
                    sheet = "Mr. Trash Wheel",
                    skip = 1) |> 
  janitor::clean_names() |> 
  filter(!(dumpster == "na")) |> 
  mutate(sports_balls = as.integer(round(sports_balls))) |> 
  select(-x15, -x16)
```

    ## New names:
    ## • `` -> `...15`
    ## • `` -> `...16`

``` r
ptw_df = read_excel("data/202509 Trash Wheel Collection Data.xlsx",
                    sheet = "Professor Trash Wheel",
                    skip = 1) |> 
  janitor::clean_names() |> 
  filter(!(dumpster == "na")) 
```

``` r
gtw_df = read_excel("data/202509 Trash Wheel Collection Data.xlsx",
                    sheet = "Gwynns Falls Trash Wheel",
                    skip = 1) |> 
  janitor::clean_names() |> 
  filter(!(dumpster == "na")) 
```

``` r
mtw_df = mutate(mtw_df, wheel_name = "Mr. Trash Wheel", year = as.integer(year))
ptw_df = mutate(ptw_df, wheel_name = "Professor Trash Wheel", year = as.integer(year))
gtw_df = mutate(gtw_df, wheel_name = "Gwynns Falls Trash Wheel", year = as.integer(year))
combined_df = bind_rows(mtw_df, ptw_df, gtw_df) 
```

By combining the data from the three data sheets, we get the
`combined_df` data set, which has 1188 rows of observations and 15
columns of data. The dataset give information by each dumpster from the
three wheels: **Mr. Trash Wheel**, **Professor Trash Wheel**, and
**Gwynns Falls Trash Wheel**. Some of the key variables are
`weight_tons` `plastic_bottles` `cigarette_butts` `glass_bottles` and
`homes_powered`. The total weight of trash collected by Professor Trash
Wheel is 282.26 tons, and the total number of cigarette butts collected
by Gwynnda in June of 2022 is 18120.

## Problem 3

``` r
rent_df = read_csv("data/Zip_zori_uc_sfrcondomfr_sm_month_NYC.csv") |> 
  pivot_longer(cols = 10:125,
               names_to = "date",
               values_to = "rent_rate") |> 
  janitor::clean_names() |> 
  select(-region_type, -state_name, -state, -city, -metro) |> 
  mutate(county_name = str_trim(str_remove(county_name, " County$"))) |> 
  relocate(1:2, .after = last_col()) |> 
  rename(zip_code = region_name)
```

    ## Rows: 149 Columns: 125
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr   (6): RegionType, StateName, State, City, Metro, CountyName
    ## dbl (119): RegionID, SizeRank, RegionName, 2015-01-31, 2015-02-28, 2015-03-3...
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
zip_df = read_csv("data/Zip Codes.csv") |> 
  janitor::clean_names() |> 
  select(-county_code, -county_fips, -state_fips, -file_date) |> 
  relocate(2, .before = 1)
```

    ## Rows: 322 Columns: 7
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (4): County, County Code, File Date, Neighborhood
    ## dbl (3): State FIPS, County FIPS, ZipCode
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.
