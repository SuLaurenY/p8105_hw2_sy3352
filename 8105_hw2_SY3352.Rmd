---
title: "p8105_hw2_SY3352"
author: "Su Yan"
date: "2025-10-01"
output: github_document
---

```{r setup, include = FALSE}
library(tidyverse)
```

## Problem 1
```{r}
pols_df = read_csv("data/pols-month.csv") |> 
  separate(mon, into = c("year","month","day"), sep = "-") |> 
  mutate(year = as.integer(year), month = as.integer(month)) |> 
  mutate(month = month.name[month]) |> 
  mutate(president = if_else(prez_gop == 1, "gop","dem")) |> 
  select(-prez_dem, -prez_gop,-day)
```

```{r}
snp_df = read_csv("data/snp.csv") |> 
  mutate(date = mdy(date)) |> 
  mutate(year = year(date), month = month(date), day = day(date)) |> 
  mutate(year = as.integer(year), month = month.name[month]) |> 
  mutate(year = if_else(year > 2024, year - 100, year)) |> 
  select(-date, -day) |> 
  relocate(year, month) |> 
  arrange(year, match(month, month.name))
```

```{r}
unemp_df = read_csv("data/unemployment.csv") |> 
  pivot_longer(cols = Jan:Dec,
               names_to = "month",
               values_to = "unemployment_rate") |> 
  mutate(month = recode(month,
                        Jan = "January", Feb = "February", Mar = "March",
                        Apr = "April", May = "May", Jun = "June",
                        Jul = "July", Aug = "August", Sep = "September",
                        Oct = "October", Nov = "November", Dec = "December")) |> 
  rename(year = Year) 
```

```{r}
merge_df = pols_df |> 
  left_join(snp_df, by = c("year","month")) |> 
  left_join(unemp_df, by = c("year","month"))
```

The `pols_df` data set contains data from 1947 to 2015 of number of politicians(including the president) in each political party in the US by month. The `snp_df` contains data of closing values of the S&P stock index from 1950 to 2015 by month. The `unemp_df` data set contains data of unemployment rate from 1948 to 2015 by month. The merged `merge_df` data set has `r nrow(merge_df)` rows and `r ncol(merge_df)` columns of data, which covered `r min(merge_df$year)` to `r max(merge_df$year)` of political party, S&P index closing value and employment information. Some of the key variables in **`merge_df`** are `year` `month` `president` `closing` and `unemployment_rate`.